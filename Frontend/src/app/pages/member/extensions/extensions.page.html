<ion-header id="main-content">
  <ion-toolbar class="toolbar">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title class="title">Extensions</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="background">
  <div class="search-bar-container">
    <ion-searchbar mode="md" class="search-bar" [debounce]="800" placeholder="Search extensions..." (ionInput)="handleInput($event)"></ion-searchbar>
  </div>
  <ng-container *ngIf="allExtensions.length > 0">
    <div class="lists-container">
      <ng-container *ngIf="filteredGroupedExtensions.length > 0">
        <ng-container *ngFor="let group of filteredGroupedExtensions">
          <ion-list *ngIf="group.extensions.length > 0">
            <ion-list-header [id]="'header-' + group.letter">{{ group.letter }}</ion-list-header>
            <ion-card>
              <ion-item lines="full" *ngFor="let extension of group.extensions">
                <span class="first-name">{{ extension.name }}</span>
                <ion-text slot="end">{{ extension.number }}</ion-text>
              </ion-item>
            </ion-card>
          </ion-list>
        </ng-container>
      </ng-container>
      <ng-container *ngIf="filteredGroupedExtensions.length == 0">
        <div class="body">
            <p class="no-results">No extensions found</p>
        </div>
      </ng-container>
    </div> 
  </ng-container>
  <ng-container *ngIf="allExtensions.length == 0">
    <ng-container *ngIf="isLoading">
      <div class="body">
        <ion-spinner name="crescent"></ion-spinner>
      </div> 
    </ng-container>
    <ng-container *ngIf="!isLoading">
      <div class="body">
        <div class="stmt">
          <p>No extensions </p>
          <p class="second-stmt">Phone extensions will appear here</p>
          <ion-img class="no-emergencies-img" src="assets/img/no-emergencies-img.png"></ion-img>
        </div>
      </div>  
    </ng-container>
  </ng-container>
</ion-content>