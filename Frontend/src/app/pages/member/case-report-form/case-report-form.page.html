<ion-header id="main-content">
  <ion-toolbar class="header-toolbar">
    <div class="toolbar-container">
      <ion-buttons slot="start">
        <ion-button (click)="back()">
          <ion-icon class="back-button" name="chevron-back-outline"></ion-icon>
        </ion-button>
      </ion-buttons>
      <ion-title class="title">Case Report Form</ion-title>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content class="background">
  <div class = "mainpage">
    <div class = stmt>
      Fill the case report form
    </div>
    <ion-list *ngIf="emergency">
      <div class="question">
        <ion-input label="Date of incident" mode="md" [value]="emergency.created_at | date:'dd/MM/yy'" label-placement="floating" fill="outline" [disabled]="true">
          <ion-icon class="modal-icon" name="calendar-number-outline" slot="start"></ion-icon>
        </ion-input>
      </div>
      <div class="question">
        <ion-input label="Time of incident" mode="md" [value]="emergency.created_at | date:'hh:mm'" label-placement="floating" fill="outline" [disabled]="true">
          <ion-icon class="modal-icon" name="time-outline" slot="start"></ion-icon>
        </ion-input>
      </div>
      <div class="question">
        <ion-input label="Medic on site" type = "text" [value] = "emergency.medic.first_name + ' ' + emergency.medic.last_name" mode="md" label-placement="floating" fill="outline" [disabled]="true">
          <ion-icon class="modal-icon" name="people-outline" slot="start"></ion-icon>
        </ion-input>
      </div>
      <div class="question">
        <ion-input [(ngModel)]="patient_name" label="Patient's name" type = "text" mode="md" label-placement="floating" fill="outline">
          <ion-icon class="modal-icon" name="body-outline" slot="start"></ion-icon>
        </ion-input>
      </div>
      <div class="question">
        <ion-input [(ngModel)]="location" label="Location of incident" type = "text" mode="md" label-placement="floating" fill="outline">
          <ion-icon class="modal-icon" name="location-outline" slot="start"></ion-icon>
        </ion-input>
      </div>
      <div class="question">
        <ng-container *ngIf="patient_condition !== 'other'" >
          <ion-select [(ngModel)]="patient_condition" label = "Patient's condition" mode="md" label-placement="floating" fill="outline">
            <ion-select-option value="Serious">Serious</ion-select-option>
            <ion-select-option value="Not serious">Not serious</ion-select-option>
            <ion-select-option value="Other">Other</ion-select-option>
            <ion-icon class="modal-icon" name="pulse-outline" slot="start"></ion-icon>
          </ion-select>
        </ng-container>
        <ng-container *ngIf="patient_condition === 'other'">
          <ion-input [(ngModel)]="patient_condition" placeholder="Specify..." mode="md" fill="outline">
            <ion-icon class="modal-icon" name="pulse-outline" slot="start"></ion-icon>
          </ion-input>
        </ng-container>
      </div>
      <div class="question"> 
          <ion-textarea [(ngModel)]="history" label="History" mode = "md" type = "text" label-placement="floating" fill = "outline">
            <ion-icon class="modal-icon" name="document-text-outline" slot="start"></ion-icon>
          </ion-textarea>
      </div>
      <div class="question">
        <ng-container *ngIf="treatment_administration !== 'other'" >
          <ion-select [(ngModel)]="treatment_administration" label = "Medication/Treatment administered by" mode="md" label-placement="floating" fill="outline">
            <ion-select-option value="first responder team">First Responder Team</ion-select-option>
            <ion-select-option value="lau clinic">LAU Clinic</ion-select-option>
            <ion-select-option value="none">None</ion-select-option>
            <ion-select-option value="other">Other</ion-select-option>
            <ion-icon class="modal-icon" name="medkit-outline" slot="start"></ion-icon>
          </ion-select>
        </ng-container>
        <ng-container *ngIf="treatment_administration === 'other'">
          <ion-input [(ngModel)]="treatment_administration" placeholder="Specify..." mode="md" fill="outline">
            <ion-icon class="modal-icon" name="medkit-outline" slot="start"></ion-icon>
          </ion-input>
        </ng-container>
      </div>
      <div class="question">
        <ng-container *ngIf="transportation !== 'other'" >
          <ion-select [(ngModel)]="transportation" label = "Transportation requested to" mode="md" label-placement="floating" fill="outline">
            <ion-select-option value="lau clinic">LAU Clinic</ion-select-option>
            <ion-select-option value="hospital">Hospital</ion-select-option>
            <ion-select-option value="none">None</ion-select-option>
            <ion-select-option value="other">Other</ion-select-option>
            <ion-icon class="modal-icon" name="car-outline" slot="start"></ion-icon>
          </ion-select>
        </ng-container>
        <ng-container [(ngModel)]="transportation" *ngIf="transportation === 'other'">
          <ion-input placeholder="Specify..." mode="md" fill="outline">
            <ion-icon class="modal-icon" name="car-outline" slot="start"></ion-icon>
          </ion-input>
        </ng-container>
      </div>
      <div class="question">
        <ng-container *ngIf="consultation !== 'other'" >
          <ion-select [(ngModel)]="consultation" label = "Consultation done with nurse" mode="md" label-placement="floating" fill="outline">
            <ion-select-option value="yes">Yes</ion-select-option>
            <ion-select-option value="no">No</ion-select-option>
            <ion-select-option value="other">Other</ion-select-option>
            <ion-icon class="modal-icon" name="chatbubbles-outline" slot="start"></ion-icon>
          </ion-select>
        </ng-container>
        <ng-container *ngIf="consultation === 'other'">
          <ion-input [(ngModel)]="consultation" placeholder="Specify..." mode="md" fill="outline">
            <ion-icon class="modal-icon" name="chatbubbles-outline" slot="start"></ion-icon>
          </ion-input>
        </ng-container>
      </div>
      <div class="question">
        <ion-input [(ngModel)]="equipment" label="Material/equipment used (if any)" type = "text" mode="md" label-placement="floating" fill="outline">
          <ion-icon class="modal-icon" name="bandage-outline" slot="start"></ion-icon>
        </ion-input>
      </div>
      <div class="question">
        <ng-container *ngIf="issues !== 'other'" >
          <ion-select [(ngModel)]="issues" label = "Any issues encountered by the dispatch team" mode="md" label-placement="floating" fill="outline">
            <ion-select-option value="yes">Yes</ion-select-option>
            <ion-select-option value="no">No</ion-select-option>
            <ion-icon class="modal-icon" name="warning-outline" slot="start"></ion-icon>
          </ion-select>
        </ng-container>
        <ng-container *ngIf="issues === 'other'">
          <ion-input [(ngModel)]="issues" placeholder="Specify..." mode="md" fill="outline">
            <ion-icon class="modal-icon" name="warning-outline" slot="start"></ion-icon>
          </ion-input>
        </ng-container>
      </div>       
    </ion-list>
    <div class="submit-button-container">
      <ion-button fill="outline" mode="ios" class="submit-button" (click)="addCaseReport()">Submit</ion-button>
    </div>
  </div>
</ion-content>