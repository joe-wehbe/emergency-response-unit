"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8298],{8298:(E,g,i)=>{i.r(g),i.d(g,{ReportEmergencyPageModule:()=>k});var u=i(6814),y=i(6223),c=i(451),m=i(8179),p=i(5861),e=i(9212),h=i(4050),C=i(8859);function b(t,o){if(1&t&&(e.TgZ(0,"div",12)(1,"h2"),e._uU(2),e.qZA()()),2&t){const a=e.oxw();e.xp6(2),e.Oqu(a.notifyingStatement)}}const P=t=>({"sos-button-animated":t}),x=(t,o)=>({"circle circle-2-animated":t,"circle circle-2":o}),v=(t,o)=>({"circle circle-3-animated":t,"circle circle-3":o}),O=[{path:"",component:(()=>{var t;class o{constructor(n,s,d,r){this.alertController=n,this.toastController=s,this.emergencyService=d,this.fcmService=r,this.isButtonClicked=!1,this.notifyingStatement="",this.firstH4Content="Press the button below",this.secondH4Content="to notify medics"}ngOnInit(){}reportEmergencyAlert(){var n=this;return(0,p.Z)(function*(){var d;n.isButtonClicked||(yield(yield n.alertController.create({header:"Emergency Alert",subHeader:"Please provide emergency information",cssClass:"alert-dialog",mode:"ios",inputs:[{name:"location",type:"text",placeholder:"Location...",cssClass:"location-input",attributes:{required:!0,maxlength:20}},{name:"description",type:"text",placeholder:"Description...",cssClass:"description-input",attributes:{required:!0}}],buttons:[{text:"Cancel",role:"cancel",cssClass:"alert-button-cancel",handler:()=>!0},{text:"Report",cssClass:"alert-button-ok-red",handler:(d=(0,p.Z)(function*(r){return r.location||r.description?r.location?r.description?(n.emergencyService.reportEmergency(r.location,r.description).subscribe({next:l=>{console.log("Emergency reported successfully:",l),n.sendSOS(),n.fcmService.notifyFirstResponders(r.location,r.description)},error:l=>{console.error("Error reporting emergency:",l)},complete:()=>{}}),!0):((yield n.toastController.create({message:"Please provide a description",duration:2e3,position:"bottom"})).present(),!1):((yield n.toastController.create({message:"Please specify the emergency location",duration:2e3,position:"bottom"})).present(),!1):((yield n.toastController.create({message:"Please specify emergency location and description",duration:2e3,position:"bottom"})).present(),!1)}),function(l){return d.apply(this,arguments)})}]})).present())})()}sendSOS(){this.notifyingStatement="Notifying medics...",this.firstH4Content="We will let you know",this.secondH4Content="when a medic responds",this.isButtonClicked=!0;const n=document.querySelector(".sos-button");n&&(n.classList.add("clicked"),setTimeout(()=>{n.classList.remove("clicked")},500)),setTimeout(()=>{this.isButtonClicked=!1,this.notifyingStatement="No medics responded!",this.firstH4Content="Contact medics directly",this.secondH4Content="or try again!"},6e4)}}return(t=o).\u0275fac=function(n){return new(n||t)(e.Y36(c.Br),e.Y36(c.yF),e.Y36(h.m),e.Y36(C.E))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-report-emergency"]],decls:22,vars:14,consts:[["id","main-content"],[1,"toolbar"],["slot","start"],[1,"title"],[1,"background"],[1,"body"],[1,"stmt"],[1,"second"],[1,"circles-container"],[1,"sos-button",3,"ngClass","click"],[3,"ngClass"],["class","notif-stmt",4,"ngIf"],[1,"notif-stmt"]],template:function(n,s){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title",3),e._uU(5,"Report Emergency"),e.qZA()()(),e.TgZ(6,"ion-content",4)(7,"div",5)(8,"div",6)(9,"h1"),e._uU(10,"Received an emergency call?"),e.qZA(),e.TgZ(11,"h4"),e._uU(12),e.qZA(),e.TgZ(13,"h4",7),e._uU(14),e.qZA()(),e.TgZ(15,"div",8)(16,"button",9),e.NdJ("click",function(){return s.reportEmergencyAlert()}),e.TgZ(17,"h1"),e._uU(18,"SOS"),e.qZA()(),e._UZ(19,"div",10)(20,"div",10),e.qZA(),e.YNc(21,b,3,1,"div",11),e.qZA()()),2&n&&(e.xp6(12),e.Oqu(s.firstH4Content),e.xp6(2),e.Oqu(s.secondH4Content),e.xp6(2),e.Q6J("ngClass",e.VKq(6,P,s.isButtonClicked)),e.xp6(3),e.Q6J("ngClass",e.WLB(8,x,s.isButtonClicked,!s.isButtonClicked)),e.xp6(),e.Q6J("ngClass",e.WLB(11,v,s.isButtonClicked,!s.isButtonClicked)),e.xp6(),e.Q6J("ngIf",s.notifyingStatement))},dependencies:[u.mk,u.O5,c.Sm,c.W2,c.Gu,c.fG,c.wd,c.sr],styles:[".toolbar[_ngcontent-%COMP%]{height:60px;display:flex;justify-content:center;align-items:center}ion-menu-button[_ngcontent-%COMP%]{font-weight:400}.title[_ngcontent-%COMP%]{font-size:22px;font-weight:400}.body[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding-top:5em}.stmt[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.stmt[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px}.second[_ngcontent-%COMP%]{margin-top:-.5em}.circles-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:20em}.sos-button[_ngcontent-%COMP%]{border-radius:50%;width:160px;height:160px;background-color:#81080899;z-index:3;color:#fff;font-size:24px;border:none;cursor:pointer;transition:background-color .3s ease}.sos-button-animated[_ngcontent-%COMP%]{border-radius:50%;width:160px;height:160px;background-color:#81080899;z-index:3;color:#fff;font-size:24px;border:none;cursor:pointer;transition:background-color .3s ease;animation:_ngcontent-%COMP%_sos-pulse 1.2s ease-out infinite}.sos-button[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:45px}.circle-2[_ngcontent-%COMP%]{position:absolute;border-radius:50%;width:200px;height:200px;background-color:#81080866;z-index:2}.circle-2-animated[_ngcontent-%COMP%]{position:absolute;border-radius:50%;width:190px;height:190px;background-color:#81080866;z-index:2;animation:_ngcontent-%COMP%_sos-wave 1.2s ease-out infinite}.circle-3[_ngcontent-%COMP%]{position:absolute;border-radius:50%;width:240px;height:240px;background-color:#81080833;z-index:1}.circle-3-animated[_ngcontent-%COMP%]{position:absolute;border-radius:50%;width:240px;height:240px;background-color:#81080833;z-index:1;animation:_ngcontent-%COMP%_sos-wave 1.2s ease-out infinite}@keyframes _ngcontent-%COMP%_sos-pulse{0%{transform:scale(1)}50%{transform:scale(1.06)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_sos-wave{0%{transform:scale(0);opacity:.8}to{transform:scale(1.2);opacity:.6}}"]}),o})()}];let M=(()=>{var t;class o{}return(t=o).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.Bz.forChild(O),m.Bz]}),o})(),k=(()=>{var t;class o{}return(t=o).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,y.u5,c.Pc,M]}),o})()}}]);