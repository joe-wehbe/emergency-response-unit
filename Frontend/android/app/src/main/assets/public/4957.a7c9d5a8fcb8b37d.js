"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4957],{4957:(I,y,d)=>{d.r(y),d.d(y,{ProfilePageModule:()=>q});var x=d(6814),C=d(6223),r=d(451),P=d(8179),h=d(5861),e=d(9212),b=d(6530),v=d(8859);function Z(n,a){if(1&n&&(e.TgZ(0,"ion-text",38),e._uU(1),e.qZA()),2&n){const i=e.oxw(2);e.xp6(),e.Oqu(i.user.bio)}}function O(n,a){1&n&&(e.TgZ(0,"ion-text",39),e._uU(1,"Nothing to show here"),e.qZA())}function M(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-badge"),e._uU(2),e.qZA(),e.BQk()),2&n){const i=a.$implicit;e.xp6(2),e.Oqu(i.trim())}}function w(n,a){if(1&n&&(e.ynx(0),e.YNc(1,M,3,1,"ng-container",40),e.BQk()),2&n){const i=e.oxw(2);e.xp6(),e.Q6J("ngForOf",i.user.tags.split(","))}}function T(n,a){1&n&&(e.TgZ(0,"ion-text",41),e._uU(1,"Nothing to show here"),e.qZA())}function S(n,a){if(1&n){const i=e.EpF();e.TgZ(0,"ion-content")(1,"ion-card",5)(2,"div",6)(3,"ion-avatar",7),e._UZ(4,"img",8),e.qZA(),e.TgZ(5,"div",9)(6,"div",10)(7,"h2",11),e._uU(8),e.qZA(),e.TgZ(9,"p",12),e._uU(10),e.qZA()(),e.TgZ(11,"div",13)(12,"ion-icon",14),e.NdJ("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.navigateEditProfile())}),e.qZA()()()(),e.TgZ(13,"ion-grid",15)(14,"ion-row")(15,"ion-col",16),e._UZ(16,"ion-img",17),e.TgZ(17,"p",18),e._uU(18),e.qZA()(),e.TgZ(19,"ion-col",16),e._UZ(20,"ion-img",19),e.TgZ(21,"p",18),e._uU(22),e.qZA()()(),e.TgZ(23,"ion-row")(24,"ion-col",16),e._UZ(25,"ion-img",20),e.TgZ(26,"p",18),e._uU(27),e.qZA()(),e.TgZ(28,"ion-col",16),e._UZ(29,"ion-img",21),e.TgZ(30,"p",18),e._uU(31),e.qZA()()()(),e.TgZ(32,"div",22),e._UZ(33,"div",23),e.TgZ(34,"p",24),e._uU(35,"Experience"),e.qZA(),e._UZ(36,"div",25),e.qZA(),e.TgZ(37,"div",26)(38,"div",27)(39,"h6"),e._uU(40,"Talk about your accomplishments"),e.qZA(),e.TgZ(41,"ion-card",28),e.YNc(42,Z,2,1,"ion-text",29)(43,O,2,0,"ion-text",30),e.qZA()(),e.TgZ(44,"div",31)(45,"h6"),e._uU(46,"Show your skills in the medical field"),e.qZA(),e.TgZ(47,"ion-card",32),e.YNc(48,w,2,1,"ng-container",4)(49,T,2,0,"ion-text",33),e.qZA()()(),e.TgZ(50,"div",22),e._UZ(51,"div",23),e.TgZ(52,"p",24),e._uU(53,"Schedule"),e.qZA(),e._UZ(54,"div",25),e.qZA(),e.TgZ(55,"div",34)(56,"ion-datetime",35),e.NdJ("ionChange",function(o){e.CHM(i);const c=e.oxw();return e.KtG(c.showShiftTime(o))}),e.qZA()(),e.TgZ(57,"div",36)(58,"ion-button",37),e.NdJ("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.markAttendance())}),e._uU(59,"Mark attendance"),e.qZA()()()()}if(2&n){const i=e.oxw();e.xp6(8),e.AsE("",i.user.first_name," ",i.user.last_name,""),e.xp6(2),e.Oqu(i.user.rank.rank_name),e.xp6(3),e.Q6J("fixed",!0),e.xp6(5),e.Oqu(i.user.lau_email),e.xp6(4),e.Oqu(i.user.phone_number),e.xp6(5),e.Oqu(i.user.student_id),e.xp6(4),e.Oqu(i.user.major),e.xp6(11),e.Q6J("ngIf",i.user&&i.user.bio),e.xp6(),e.Q6J("ngIf",!(i.user&&i.user.bio)),e.xp6(5),e.Q6J("ngIf",i.user&&i.user.tags),e.xp6(),e.Q6J("ngIf",!(i.user&&i.user.tags)),e.xp6(7),e.Q6J("firstDayOfWeek",1)("highlightedDates",i.highlightedDates)}}function k(n,a){1&n&&(e.TgZ(0,"ion-content")(1,"div",42),e._UZ(2,"ion-spinner",43),e.qZA()())}const U=[{path:"",component:(()=>{var n;class a{constructor(t,o,c,s,l){this.router=t,this.alertController=o,this.toastController=c,this.userService=s,this.fcmService=l,this.userShifts=[],this.shifts=[],this.semesterData=[],this.isLoading=!1,this.highlightedDates=g=>{const u=new Date(g);if(this.semesterData.length>0){const p=new Date(this.semesterData[0].start_date),f=new Date(this.semesterData[0].end_date);if(u>=p&&u<=f){const m=u.toLocaleDateString("en-US",{weekday:"long"});return this.shifts.filter(D=>D.day===m).length>0?{textColor:"#800080",backgroundColor:"#ffc0cb"}:void 0}}}}ngOnInit(){this.getUserInfo(),this.getUserShifts(),this.getSemester()}getUserInfo(){var t;this.isLoading=!0,this.userService.getUserInfo(null!==(t=localStorage.getItem("user_id"))&&void 0!==t?t:"").subscribe({next:o=>{console.log("Fetched user data:",o),this.user=o.User},error:o=>{console.error("Error getting user info:",o)},complete:()=>{this.isLoading=!1}})}getUserShifts(){var t;this.userService.getUserShifts(null!==(t=localStorage.getItem("user_id"))&&void 0!==t?t:"").subscribe({next:o=>{console.log("Fetched user shifts:",o);const c=JSON.parse(JSON.stringify(o));this.userShifts=[].concat.apply([],Object.values(c.Shifts)),this.userShifts.forEach(s=>{this.shifts.push({id:s.shift_id,day:s.shift.day,start_time:s.shift.time_start,end_time:s.shift.time_end})})},error:o=>{console.error("Error getting user info:",o)},complete:()=>{}})}getSemester(){this.userService.getSemester().subscribe({next:t=>{console.log("Fetched semester data",t),this.semesterData=t.Semester},error:t=>{console.error("Error getting semester data:",t)},complete:()=>{}})}showShiftTime(t){var o=this;return(0,h.Z)(function*(){const c=t.detail.value;if(o.highlightedDates(c)){const l=new Date(c).toLocaleDateString("en-US",{weekday:"long"}),g=o.shifts.filter(u=>u.day===l);if(g.length>0){const u=g.map(f=>`from ${f.start_time} to ${f.end_time}`).join(", ");yield(yield o.alertController.create({header:"Your shifts",subHeader:`${u}`,buttons:[{text:"OK",role:"cancel",cssClass:"alert-button-cancel"},{text:"Request cover",cssClass:"alert-button-ok-red",handler:()=>{1===g.length?o.reason(g[0].id,g[0].start_time,g[0].end_time,g[0].day):o.multiShiftsAlert(g)}}],cssClass:"alert-dialog"})).present()}}})()}multiShiftsAlert(t){var o=this;return(0,h.Z)(function*(){yield(yield o.alertController.create({header:"Select shift",cssClass:"alert-dialog",mode:"ios",inputs:t.map((s,l)=>({name:`${l}`,type:"radio",label:`from ${s.start_time} to ${s.end_time}`,value:s,checked:0===l})),buttons:[{text:"Cancel",role:"cancel",cssClass:"alert-button-cancel"},{text:"Select",cssClass:"alert-button-ok-red",handler:s=>{o.reason(s.id,s.start_time,s.end_time,s.day)}}]})).present()})()}reason(t,o,c,s){var l=this;return(0,h.Z)(function*(){var u;yield(yield l.alertController.create({header:"Request cover?",subHeader:"Your attendance will be affected if the member accepting your request fails to cover your shift!",cssClass:"alert-dialog",inputs:[{name:"reason",type:"text",placeholder:"Reason...",cssClass:"location-input",attributes:{required:!0}}],buttons:[{text:"Cancel",role:"cancel",cssClass:"alert-button-cancel",handler:()=>!0},{text:"Request",cssClass:"alert-button-ok-red",handler:(u=(0,h.Z)(function*(p){return p.reason?(l.userService.requestCover(t,p.reason).subscribe({next:f=>{var m,_;console.log("Cover request sent successfully:",f),l.presentToast("Cover request sent"),l.fcmService.notifyForCoverRequest(null!==(m=localStorage.getItem("first_name"))&&void 0!==m?m:"",null!==(_=localStorage.getItem("last_name"))&&void 0!==_?_:"",o,c,s)},error:f=>{console.error("Error requesting cover:",f)}}),!0):(l.presentToast("Please speficy the reason"),!1)}),function(f){return u.apply(this,arguments)})}]})).present()})()}markAttendance(){this.userService.markAttendance().subscribe({next:t=>{console.log("Marked attendance successfully:",t),this.presentToast("Attendance marked for the current shift")},error:t=>{console.error("Error marking attendance:",t)}})}navigateEditProfile(){this.router.navigate(["./edit-profile"])}presentToast(t){var o=this;return(0,h.Z)(function*(){(yield o.toastController.create({message:t,duration:2e3,position:"bottom"})).present()})()}}return(n=a).\u0275fac=function(t){return new(t||n)(e.Y36(P.F0),e.Y36(r.Br),e.Y36(r.yF),e.Y36(b.K),e.Y36(v.E))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-profile"]],decls:8,vars:2,consts:[["id","main-content"],[1,"toolbar"],["slot","start"],[1,"title"],[4,"ngIf"],[1,"card-container"],[1,"header"],[1,"icon"],["alt","Silhouette of a person's head","src","https://ionicframework.com/docs/img/demos/avatar.svg"],[1,"container"],[1,"np-container"],[1,"name"],[1,"position"],[1,"edit-button"],["name","create-outline",3,"click"],[1,"grid-container",3,"fixed"],["size","6","size-md","4","size-lg","2"],["src","assets/icon/email.png"],[1,"entry"],["src","assets/icon/phone.png"],["src","assets/icon/id.png"],["src","assets/icon/major.png"],[1,"seperator"],[1,"first-line"],[1,"section-name"],[1,"second-line"],[1,"experience-sections"],[1,"first-experience-section"],[1,"experience-card"],["class","experience-text",4,"ngIf"],["class","no-experience-text",4,"ngIf"],[1,"second-experience-section"],[1,"skills-card"],["class","no-tags-text",4,"ngIf"],[1,"calendar-container"],["mode","md","presentation","date",1,"calendar",3,"firstDayOfWeek","highlightedDates","ionChange"],[1,"attendance-button-container"],["mode","ios","fill","outline",1,"attendance-button",3,"click"],[1,"experience-text"],[1,"no-experience-text"],[4,"ngFor","ngForOf"],[1,"no-tags-text"],[1,"body"],["name","crescent"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title",3),e._uU(5,"My Profile"),e.qZA()()(),e.YNc(6,S,60,14,"ion-content",4)(7,k,3,0,"ion-content",4)),2&t&&(e.xp6(6),e.Q6J("ngIf",o.user),e.xp6(),e.Q6J("ngIf",!o.user&&o.isLoading))},dependencies:[x.sg,x.O5,r.BJ,r.yp,r.YG,r.Sm,r.PM,r.wI,r.W2,r.x4,r.jY,r.Gu,r.gu,r.Xz,r.fG,r.Nd,r.PQ,r.yW,r.wd,r.sr,r.QI],styles:['.toolbar[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:60px}ion-menu-button[_ngcontent-%COMP%]{font-weight:400}.title[_ngcontent-%COMP%]{font-size:22px;font-weight:400}.header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:var(--ion-header-background);height:8em;border-bottom:solid 1px}.icon[_ngcontent-%COMP%]{margin:5%;height:80px;width:80px}.container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:70%}.np-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.name[_ngcontent-%COMP%], .position[_ngcontent-%COMP%]{margin:0;font-size:1.2rem}.position[_ngcontent-%COMP%]{font-size:.8rem;padding-left:5px}.edit-button[_ngcontent-%COMP%]{width:25%;display:flex;justify-content:flex-end;align-items:center;padding-right:10px}ion-icon[_ngcontent-%COMP%]{font-size:30px;opacity:.8}ion-icon[_ngcontent-%COMP%]:active{font-size:30px;color:gray;opacity:.8}ion-grid[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}ion-row[_ngcontent-%COMP%]{height:3em}ion-col[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}ion-img[_ngcontent-%COMP%]{width:40px;padding-right:10px}.entry[_ngcontent-%COMP%]{font-size:12px}.seperator[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding-left:10px;padding-right:10px}.first-line[_ngcontent-%COMP%]{position:relative;width:30%;height:1px;background-color:#837272}.first-line[_ngcontent-%COMP%]:before{content:"";position:absolute;width:10px;height:10px;border-radius:50%;background-color:#837272;left:0;top:-5px}.section-name[_ngcontent-%COMP%]{font-size:16px;padding:5px}.second-line[_ngcontent-%COMP%]{position:relative;width:100%;height:1px;background-color:#837272}.second-line[_ngcontent-%COMP%]:after{content:"";position:absolute;width:10px;height:10px;border-radius:50%;background-color:#837272;right:0;top:-5px}.experience-sections[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.first-experience-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-left:10px;padding-right:10px;margin-bottom:10px;width:100%}h6[_ngcontent-%COMP%]{font-size:.8rem;font-weight:lighter;margin:0}.experience-card[_ngcontent-%COMP%]{padding:10px;margin:0;border-radius:10px;border:1px solid lightgray}.experience-text[_ngcontent-%COMP%]{font-size:.8rem;font-weight:lighter}.second-experience-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-left:10px;padding-right:10px;width:100%}.skills-card[_ngcontent-%COMP%]{padding:10px;margin:0;border-radius:10px;border:1px solid lightgray}.no-experience-text[_ngcontent-%COMP%], .no-tags-text[_ngcontent-%COMP%]{font-style:italic}ion-badge[_ngcontent-%COMP%]{background:#810808;font-weight:400;margin-right:2px;--color: white}.calendar-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.calendar[_ngcontent-%COMP%]{background-color:transparent}ion-datetime[_ngcontent-%COMP%]{--wheel-highlight-background: lightgray;--wheel-fade-background-rgb: white}.attendance-button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:10px}.attendance-button[_ngcontent-%COMP%]{--border-color: #810808;--background-activated: #4d0606;--color-activated: white;width:50%}ion-datetime[_ngcontent-%COMP%]::part(calendar-day):focus{background-color:transparent;box-shadow:none;border-color:#810808;color:#810808}.body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-evenly;margin-top:5em;padding:10px}.stmt[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding-top:1em;font-size:18px;font-weight:700}.second-stmt[_ngcontent-%COMP%]{margin-top:-1em;font-size:14px;text-align:center}.no-emergencies-img[_ngcontent-%COMP%]{width:80%}.no-results[_ngcontent-%COMP%]{font-style:italic}']}),a})()}];let A=(()=>{var n;class a{}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[P.Bz.forChild(U),P.Bz]}),a})(),q=(()=>{var n;class a{}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[x.ez,C.u5,r.Pc,A]}),a})()}}]);