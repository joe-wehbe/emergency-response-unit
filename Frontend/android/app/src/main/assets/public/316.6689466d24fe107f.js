"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[316],{316:(q,_,l)=>{l.r(_),l.d(_,{UserProfilePageModule:()=>S});var m=l(6814),b=l(6223),s=l(451),g=l(8179),h=l(5861),e=l(9212),C=l(82),P=l(6530);function y(i,a){if(1&i&&(e.TgZ(0,"ion-text",40),e._uU(1),e.qZA()),2&i){const o=e.oxw(2);e.xp6(),e.Oqu(o.user.bio)}}function v(i,a){1&i&&(e.TgZ(0,"ion-text",41),e._uU(1,"Nothing to show here"),e.qZA())}function k(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"ion-badge"),e._uU(2),e.qZA(),e.BQk()),2&i){const o=a.$implicit;e.xp6(2),e.Oqu(o.trim())}}function M(i,a){if(1&i&&(e.ynx(0),e.YNc(1,k,3,1,"ng-container",42),e.BQk()),2&i){const o=e.oxw(2);e.xp6(),e.Q6J("ngForOf",o.user.tags.split(","))}}function Z(i,a){1&i&&(e.TgZ(0,"ion-text",43),e._uU(1,"Nothing to show here"),e.qZA())}function O(i,a){if(1&i){const o=e.EpF();e.TgZ(0,"ion-content")(1,"ion-card",8)(2,"div",9)(3,"ion-avatar",10),e._UZ(4,"img",11),e.qZA(),e.TgZ(5,"div",12)(6,"div",13)(7,"h2",14),e._uU(8),e.qZA(),e.TgZ(9,"p",15),e._uU(10),e.qZA()(),e.TgZ(11,"div",16),e._UZ(12,"ion-icon",17)(13,"ion-action-sheet",18),e.qZA()()(),e.TgZ(14,"ion-grid",19)(15,"ion-row")(16,"ion-col",20),e._UZ(17,"ion-img",21),e.TgZ(18,"p",22),e._uU(19),e.qZA()(),e.TgZ(20,"ion-col",20),e._UZ(21,"ion-img",23),e.TgZ(22,"p",22),e._uU(23),e.qZA()()(),e.TgZ(24,"ion-row")(25,"ion-col",20),e._UZ(26,"ion-img",24),e.TgZ(27,"p",22),e._uU(28),e.qZA()(),e.TgZ(29,"ion-col",20),e._UZ(30,"ion-img",25),e.TgZ(31,"p",22),e._uU(32),e.qZA()()()(),e.TgZ(33,"div",26),e._UZ(34,"div",27),e.TgZ(35,"p",28),e._uU(36,"Experience"),e.qZA(),e._UZ(37,"div",29),e.qZA(),e.TgZ(38,"div",30)(39,"div",31)(40,"h6"),e._uU(41,"Talk about your accomplishments"),e.qZA(),e.TgZ(42,"ion-card",32),e.YNc(43,y,2,1,"ion-text",33)(44,v,2,0,"ion-text",34),e.qZA()(),e.TgZ(45,"div",35)(46,"h6"),e._uU(47,"Show your skills in the medical field"),e.qZA(),e.TgZ(48,"ion-card",36),e.YNc(49,M,2,1,"ng-container",7)(50,Z,2,0,"ion-text",37),e.qZA()()(),e.TgZ(51,"div",26),e._UZ(52,"div",27),e.TgZ(53,"p",28),e._uU(54,"Schedule"),e.qZA(),e._UZ(55,"div",29),e.qZA(),e.TgZ(56,"div",38)(57,"ion-datetime",39),e.NdJ("ionChange",function(n){e.CHM(o);const r=e.oxw();return e.KtG(r.showShiftTime(n))}),e.qZA()()()()}if(2&i){const o=e.oxw();e.xp6(8),e.AsE("",o.user.first_name," ",o.user.last_name,""),e.xp6(2),e.Oqu(o.user.rank.rank_name),e.xp6(3),e.Q6J("buttons",o.actionSheetButtons),e.xp6(),e.Q6J("fixed",!0),e.xp6(5),e.Oqu(o.user.lau_email),e.xp6(4),e.Oqu(o.user.phone_number),e.xp6(5),e.Oqu(o.user.student_id),e.xp6(4),e.Oqu(o.user.major),e.xp6(11),e.Q6J("ngIf",o.user&&o.user.bio),e.xp6(),e.Q6J("ngIf",!(o.user&&o.user.bio)),e.xp6(5),e.Q6J("ngIf",o.user&&o.user.tags),e.xp6(),e.Q6J("ngIf",!(o.user&&o.user.tags)),e.xp6(7),e.Q6J("firstDayOfWeek",1)("highlightedDates",o.highlightedDates)}}function U(i,a){1&i&&(e.TgZ(0,"ion-content")(1,"div",44),e._UZ(2,"ion-spinner",45),e.qZA()())}const T=[{path:"",component:(()=>{var i;class a{constructor(t,n,r,c,x,u){this.toastController=t,this.adminService=n,this.router=r,this.alertController=c,this.userService=x,this.route=u,this.boardMemberChecked=!1,this.medicChecked=!1,this.dispatcherChecked=!1,this.userId="",this.userShifts=[],this.shifts=[],this.semesterData=[],this.isLoading=!1,this.highlightedDates=d=>{const p=new Date(d);if(this.semesterData.length>0){const f=new Date(this.semesterData[0].start_date),A=new Date(this.semesterData[0].end_date);if(p>=f&&p<=A){const D=p.toLocaleDateString("en-US",{weekday:"long"});return this.shifts.filter(I=>I.day===D).length>0?{textColor:"#800080",backgroundColor:"#ffc0cb"}:void 0}}},this.actionSheetButtons=[{text:"Change schedule",data:{action:"change-schedule"},handler:()=>{this.router.navigate(["./change-schedule",this.userId])}},{text:"Change rank",data:{action:"change-rank"},handler:()=>{this.rankAlert()}},{text:"Remove Member",role:"destructive",cssClass:"delete-button",data:{action:"delete"},handler:()=>{this.removeAlert()}},{text:"Cancel",role:"cancel",data:{action:"cancel"}}]}ngOnInit(){this.getUserInfo(),this.getUserShifts(),this.getSemester()}getUserInfo(){this.isLoading=!0,this.route.params.subscribe(t=>{this.userId=t.id,this.userService.getUserInfo(this.userId).subscribe({next:n=>{console.log("Fetched user data:",n),this.user=n.User},error:n=>{console.error("Error getting user info:",n)},complete:()=>{this.isLoading=!1}})})}getUserShifts(){this.route.params.subscribe(t=>{this.userId=t.id,this.userService.getUserShifts(this.userId).subscribe({next:n=>{console.log("Fetched user shifts:",n);const r=JSON.parse(JSON.stringify(n));this.userShifts=[].concat.apply([],Object.values(r.Shifts)),this.userShifts.forEach(c=>{this.shifts.push({id:c.id,day:c.shift.day,start_time:c.shift.time_start,end_time:c.shift.time_end})})},error:n=>{console.error("Error getting user info:",n)},complete:()=>{}})})}getSemester(){this.userService.getSemester().subscribe({next:t=>{console.log("Fetched semester data",t),this.semesterData=t.Semester},error:t=>{console.error("Error getting semester data:",t)},complete:()=>{}})}showShiftTime(t){var n=this;return(0,h.Z)(function*(){const r=t.detail.value;if(n.highlightedDates(r)){const x=new Date(r).toLocaleDateString("en-US",{weekday:"long"}),u=n.shifts.filter(d=>d.day===x);if(u.length>0){const d=u.map(f=>`from ${f.start_time} to ${f.end_time}`).join(", ");yield(yield n.alertController.create({header:"Shifts",subHeader:`${d}`,buttons:[{text:"OK",role:"cancel",cssClass:"alert-button-cancel"}],cssClass:"alert-dialog"})).present()}}})()}rankAlert(){var t=this;return(0,h.Z)(function*(){yield(yield t.alertController.create({header:"Change rank",subHeader:"Select which rank(s) to promote/demote this member to.",cssClass:"alert-dialog",mode:"ios",inputs:[{name:"boardMember",type:"checkbox",label:"Board member",value:"Board member",checked:t.boardMemberChecked,handler:()=>{t.boardMemberChecked=!t.boardMemberChecked}},{name:"medic",type:"checkbox",label:"Medic",value:"Medic",checked:t.medicChecked,handler:()=>{t.medicChecked=!t.medicChecked}},{name:"dispatcher",type:"checkbox",label:"Dispatcher",value:"Dispatcher",checked:t.dispatcherChecked,handler:()=>{t.dispatcherChecked=!t.dispatcherChecked}}],buttons:[{text:"Cancel",role:"cancel",cssClass:"alert-button-cancel"},{text:"Change",cssClass:"alert-button-ok-red",handler:()=>{const r=[];t.boardMemberChecked&&r.push("Board member"),t.medicChecked&&r.push("Medic"),t.dispatcherChecked&&r.push("Dispatcher"),t.setRank(r)}}]})).present()})()}setRank(t){const n=t.includes("Medic"),r=t.includes("Dispatcher"),c=t.includes("Board member");r&&!n&&!c&&this.changeRank(1),!r&&n&&!c&&this.changeRank(2),!r&&!n&&c&&this.changeRank(3),!r&&n&&c&&this.changeRank(4),r&&!n&&c&&this.changeRank(5),r&&n&&!c&&this.changeRank(6),r&&n&&c&&this.presentToast("A member can have at most 2 ranks")}changeRank(t){this.adminService.changeRank(this.userId,t).subscribe({next:n=>{console.log("Rank updated successfully",n),this.presentToast(this.user.first_name+" "+this.user.last_name+"'s rank is updated"),this.getUserInfo()},error:n=>{console.error("Error updating rank:",n),this.presentToast("An error occured")}})}removeAlert(){var t=this;return(0,h.Z)(function*(){yield(yield t.alertController.create({header:"Remove member",subHeader:"Are you sure you want to permanently remove this member from the unit?",cssClass:"alert-dialog",buttons:[{text:"Cancel",role:"cancel",cssClass:"alert-button-cancel",handler:()=>{console.log("Cancelled")}},{text:"Remove",cssClass:"alert-button-ok-red",handler:()=>{t.removeMember(t.userId)}}]})).present()})()}removeMember(t){this.adminService.removeMember(t).subscribe({next:n=>{console.log("User removed successfully",n),this.presentToast(this.user.first_name+" "+this.user.last_name+" is no longer in the unit."),this.router.navigate(["./manage-members"]).then(()=>{window.location.reload()})},error:n=>{console.error("Error removing user:",n)}})}presentToast(t){var n=this;return(0,h.Z)(function*(){(yield n.toastController.create({message:t,duration:2e3,position:"bottom"})).present()})()}back(){this.router.navigate(["./manage-members"])}}return(i=a).\u0275fac=function(t){return new(t||i)(e.Y36(s.yF),e.Y36(C.l),e.Y36(g.F0),e.Y36(s.Br),e.Y36(P.K),e.Y36(g.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-user-profile"]],decls:10,vars:2,consts:[["id","main-content"],[1,"header-toolbar"],[1,"toolbar-container"],["slot","start"],[3,"click"],["name","chevron-back-outline",1,"back-button"],[1,"title"],[4,"ngIf"],[1,"card-container"],[1,"header"],[1,"icon"],["alt","Silhouette of a person's head","src","https://ionicframework.com/docs/img/demos/avatar.svg"],[1,"container"],[1,"np-container"],[1,"name"],[1,"position"],[1,"options-icon-container"],["id","open-action-sheet","name","options-outline",1,"options-icon"],["trigger","open-action-sheet","header","Select",1,"action-sheet",3,"buttons"],[1,"grid-container",3,"fixed"],["size","6","size-md","4","size-lg","2"],["src","assets/icon/email.png"],[1,"entry"],["src","assets/icon/phone.png"],["src","assets/icon/id.png"],["src","assets/icon/major.png"],[1,"seperator"],[1,"first-line"],[1,"section-name"],[1,"second-line"],[1,"experience-sections"],[1,"first-experience-section"],[1,"experience-card"],["class","experience-text",4,"ngIf"],["class","no-experience-text",4,"ngIf"],[1,"second-experience-section"],[1,"skills-card"],["class","no-tags-text",4,"ngIf"],[1,"calendar-container"],["mode","md","presentation","date",1,"calendar",3,"firstDayOfWeek","highlightedDates","ionChange"],[1,"experience-text"],[1,"no-experience-text"],[4,"ngFor","ngForOf"],[1,"no-tags-text"],[1,"body"],["name","crescent"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"div",2)(3,"ion-buttons",3)(4,"ion-button",4),e.NdJ("click",function(){return n.back()}),e._UZ(5,"ion-icon",5),e.qZA()(),e.TgZ(6,"ion-title",6),e._uU(7,"Profile"),e.qZA()()()(),e.YNc(8,O,58,15,"ion-content",7)(9,U,3,0,"ion-content",7)),2&t&&(e.xp6(8),e.Q6J("ngIf",n.user),e.xp6(),e.Q6J("ngIf",!n.user&&n.isLoading))},dependencies:[m.sg,m.O5,s.uo,s.BJ,s.yp,s.YG,s.Sm,s.PM,s.wI,s.W2,s.x4,s.jY,s.Gu,s.gu,s.Xz,s.Nd,s.PQ,s.yW,s.wd,s.sr,s.QI],styles:['.header-toolbar[_ngcontent-%COMP%]{height:60px;display:flex;justify-content:center;align-items:center}.toolbar-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:5px}.back-button[_ngcontent-%COMP%]{font-weight:400}.title[_ngcontent-%COMP%]{font-size:22px;font-weight:400}.header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background:var(--ion-header-background);height:8em;border-bottom:solid 1px}.icon[_ngcontent-%COMP%]{margin:5%;height:80px;width:80px}.container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:70%}.np-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.name[_ngcontent-%COMP%], .position[_ngcontent-%COMP%]{margin:0;font-size:1.2rem}.position[_ngcontent-%COMP%]{font-size:.8rem;padding-left:5px}.options-icon-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:10px}.options-icon[_ngcontent-%COMP%]{opacity:.8}.options-icon[_ngcontent-%COMP%]:active{color:gray}ion-icon[_ngcontent-%COMP%]{font-size:30px}ion-grid[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}ion-row[_ngcontent-%COMP%]{height:3em}ion-col[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}ion-img[_ngcontent-%COMP%]{width:40px;padding-right:10px}.entry[_ngcontent-%COMP%]{font-size:12px}.seperator[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding-left:10px;padding-right:10px}.first-line[_ngcontent-%COMP%]{position:relative;width:30%;height:1px;background-color:#837272}.first-line[_ngcontent-%COMP%]:before{content:"";position:absolute;width:10px;height:10px;border-radius:50%;background-color:#837272;left:0;top:-5px}.section-name[_ngcontent-%COMP%]{font-size:16px;padding:5px}.second-line[_ngcontent-%COMP%]{position:relative;width:100%;height:1px;background-color:#837272}.second-line[_ngcontent-%COMP%]:after{content:"";position:absolute;width:10px;height:10px;border-radius:50%;background-color:#837272;right:0;top:-5px}.experience-sections[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.first-experience-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-left:10px;padding-right:10px;margin-bottom:10px;width:100%}h6[_ngcontent-%COMP%]{font-size:.8rem;font-weight:lighter;font-style:italic;margin:0}.experience-card[_ngcontent-%COMP%]{padding:10px;margin:0;border-radius:10px;border:1px solid lightgray}.experience-text[_ngcontent-%COMP%]{font-size:.8rem;font-weight:lighter}.second-experience-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-left:10px;padding-right:10px;width:100%}.skills-card[_ngcontent-%COMP%]{padding:10px;margin:0;border-radius:10px;border:1px solid lightgray}.no-experience-text[_ngcontent-%COMP%], .no-tags-text[_ngcontent-%COMP%]{font-style:italic}ion-badge[_ngcontent-%COMP%]{background:#810808;font-weight:400;margin-right:2px;--color: white}.calendar-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.calendar[_ngcontent-%COMP%]{background-color:transparent}ion-datetime[_ngcontent-%COMP%]::part(calendar-day):focus{background-color:transparent;box-shadow:none;border-color:#810808;color:#810808}.body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-evenly;margin-top:5em;padding:10px}.stmt[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding-top:1em;font-size:18px;font-weight:700}.second-stmt[_ngcontent-%COMP%]{margin-top:-1em;font-size:14px;text-align:center}.no-emergencies-img[_ngcontent-%COMP%]{width:80%}.no-results[_ngcontent-%COMP%]{font-style:italic}']}),a})()}];let w=(()=>{var i;class a{}return(i=a).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.Bz.forChild(T),g.Bz]}),a})(),S=(()=>{var i;class a{}return(i=a).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,b.u5,s.Pc,w]}),a})()}}]);