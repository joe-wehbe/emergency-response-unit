"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3565],{3565:(C,d,s)=>{s.r(d),s.d(d,{OnScenePageModule:()=>v});var l=s(6814),m=s(6223),c=s(451),p=s(8179),u=s(5861),e=s(9212),f=s(4050);function _(n,i){if(1&n){const o=e.EpF();e.TgZ(0,"ion-card",10),e.NdJ("click",function(){const g=e.CHM(o).$implicit,a=e.oxw(2);return e.KtG(a.acceptAlert(g.id))}),e.TgZ(1,"div",11),e._uU(2),e.ALo(3,"date"),e._UZ(4,"br"),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"div",12)(8,"div",13),e._uU(9),e.qZA(),e.TgZ(10,"div",14)(11,"p",15),e._uU(12),e.qZA()()(),e._UZ(13,"div",16),e.TgZ(14,"div",17)(15,"div",18)(16,"p"),e._uU(17,"Medic:"),e.qZA(),e.TgZ(18,"p",19),e._uU(19,"N/A"),e.qZA()(),e.TgZ(20,"div",20)(21,"p"),e._uU(22,"Patient:"),e.qZA(),e.TgZ(23,"p",21),e._uU(24,"N/A"),e.qZA()(),e.TgZ(25,"div",22)(26,"div",23),e._UZ(27,"ion-img",24),e.TgZ(28,"p",25),e._uU(29,"N/A"),e.qZA()(),e.TgZ(30,"div",26),e._UZ(31,"ion-img",27),e.TgZ(32,"p",28),e._uU(33,"N/A"),e.qZA()(),e.TgZ(34,"div",29),e._UZ(35,"ion-img",30),e.TgZ(36,"p",31),e._uU(37,"N/A"),e.qZA()(),e.TgZ(38,"div",32),e._UZ(39,"ion-img",33),e.TgZ(40,"p",34),e._uU(41,"N/A"),e.qZA()(),e.TgZ(42,"div",35),e._UZ(43,"ion-img",36),e.TgZ(44,"p",37),e._uU(45,"N/A"),e.qZA()(),e.TgZ(46,"div",38),e._UZ(47,"ion-img",39),e.TgZ(48,"p",40),e._uU(49,"N/A"),e.qZA()(),e.TgZ(50,"div",41),e._UZ(51,"ion-img",42),e.TgZ(52,"p",43),e._uU(53,"N/A"),e.qZA()(),e.TgZ(54,"div",44),e._UZ(55,"ion-img",45),e.TgZ(56,"p",46),e._uU(57,"N/A"),e.qZA()()()()()}if(2&n){const o=i.$implicit;e.xp6(2),e.hij(" ",e.xi3(3,4,o.created_at,"dd/MM"),""),e.xp6(3),e.hij(" ",e.xi3(6,7,o.created_at,"h:mm")," "),e.xp6(4),e.hij(" ",o.location," "),e.xp6(3),e.Oqu(o.reporter_description)}}function h(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"div",7)(2,"p"),e._uU(3),e.qZA(),e.TgZ(4,"p",8),e._uU(5,"Click on a case to accept"),e.qZA()(),e.YNc(6,_,58,10,"ion-card",9),e.BQk()),2&n){const o=e.oxw();e.xp6(3),e.hij("",o.noResponseEmergencies.length," emergencies with no medical response!"),e.xp6(3),e.Q6J("ngForOf",o.noResponseEmergencies)}}function x(n,i){1&n&&(e.ynx(0),e.TgZ(1,"div",48),e._UZ(2,"ion-spinner",49),e.qZA(),e.BQk())}function Z(n,i){1&n&&(e.ynx(0),e.TgZ(1,"div",48)(2,"div",7)(3,"p"),e._uU(4,"No ongoing emergencies"),e.qZA(),e.TgZ(5,"p",8),e._uU(6,"Emergencies with no response will appear here."),e.qZA(),e._UZ(7,"ion-img",50),e.qZA()(),e.BQk())}function O(n,i){if(1&n&&e.YNc(0,x,3,0,"ng-container",47)(1,Z,8,0,"ng-container",47),2&n){const o=e.oxw();e.Q6J("ngIf",o.isLoading),e.xp6(),e.Q6J("ngIf",!o.isLoading)}}const y=[{path:"",component:(()=>{var n;class i{constructor(t,r,g){this.router=t,this.alertController=r,this.emergencyService=g,this.noResponseEmergencies=[],this.isLoading=!1}ngOnInit(){this.getNoResponseEmergencies()}getNoResponseEmergencies(){this.isLoading=!0,this.emergencyService.getNoResponseEmergencies().subscribe({next:t=>{if(t&&t.hasOwnProperty("emergencies")){console.log("Fetched no response emergencies: ",t);const r=JSON.parse(JSON.stringify(t));this.noResponseEmergencies=[].concat.apply([],Object.values(r.emergencies))}else console.log("No emergencies without response")},error:t=>{console.error("Error retrieving no response emergencies:",t)},complete:()=>{this.isLoading=!1}})}acceptAlert(t){var r=this;return(0,u.Z)(function*(){yield(yield r.alertController.create({header:"Accept Emergency?",subHeader:"Emergency reporter and standbys will be notified that you are on the way",cssClass:"alert-dialog",buttons:[{text:"Cancel",role:"cancel",cssClass:"alert-button-cancel"},{text:"Accept",cssClass:"alert-button-ok-green",handler:()=>(r.emergencyService.acceptEmergency(t).subscribe({next:a=>{console.log("Emergency accepted:",a),r.router.navigate(["./medic-emergency-details",t])},error:a=>{console.error("Error accepting emergency:",a)},complete:()=>{}}),!0)}]})).present()})()}}return(n=i).\u0275fac=function(t){return new(t||n)(e.Y36(p.F0),e.Y36(c.Br),e.Y36(f.m))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-on-scene"]],decls:10,vars:2,consts:[["id","main-content"],[1,"toolbar"],["slot","start"],[1,"title"],[1,"background"],[4,"ngIf","ngIfElse"],["noEmergencies",""],[1,"stmt"],[1,"second-stmt"],["class","ongoing-card",3,"click",4,"ngFor","ngForOf"],[1,"ongoing-card",3,"click"],[1,"first-box-red"],[1,"second-box"],[1,"location"],[1,"description-container"],[1,"description"],[1,"seperator"],[1,"third-box"],[1,"medic"],[1,"medic-name-red"],[1,"patient"],[1,"patient-name-red"],[1,"vitals"],[1,"heart-rate"],["src","assets/icon/hr.png"],[1,"hr"],[1,"blood-pressure"],["src","assets/icon/bp.png"],[1,"bp"],[1,"spo2"],["src","assets/icon/spo2.png"],[1,"sp"],[1,"temperature"],["src","assets/icon/temp.png"],[1,"temp"],[1,"respiration-rate"],["src","assets/icon/rr.png"],[1,"rr"],[1,"capillary-refill"],["src","assets/icon/crt.png"],[1,"crt"],[1,"hemo-gluco-test"],["src","assets/icon/hgt.png"],[1,"hgt"],[1,"pupils-reaction"],["src","assets/icon/pr.png"],[1,"pr"],[4,"ngIf"],[1,"body"],["name","crescent"],["src","assets/img/no-emergencies-img.png",1,"no-emergencies-img"]],template:function(t,r){if(1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title",3),e._uU(5,"On Scene"),e.qZA()()(),e.TgZ(6,"ion-content",4),e.YNc(7,h,7,2,"ng-container",5)(8,O,2,2,"ng-template",null,6,e.W1O),e.qZA()),2&t){const g=e.MAs(9);e.xp6(7),e.Q6J("ngIf",r.noResponseEmergencies.length>0)("ngIfElse",g)}},dependencies:[l.sg,l.O5,c.Sm,c.PM,c.W2,c.Gu,c.Xz,c.fG,c.PQ,c.wd,c.sr,l.uU],styles:[".toolbar[_ngcontent-%COMP%]{height:60px;display:flex;justify-content:center;align-items:center}ion-menu-button[_ngcontent-%COMP%]{font-weight:400}.title[_ngcontent-%COMP%]{font-size:22px;font-weight:400}.stmt[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding-top:1em;font-size:18px;font-weight:700}.second-stmt[_ngcontent-%COMP%]{margin-top:-1em;font-size:14px;text-align:center}.ongoing-card[_ngcontent-%COMP%]{display:flex;flex-direction:row;box-shadow:0 0 8px #0000004d;height:7em;margin:10px}.ongoing-card[_ngcontent-%COMP%]:active{animation:_ngcontent-%COMP%_pulse .1s ease-in-out}.first-box-green[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;width:10%;background-color:#08811b;color:#fff}.first-box-red[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;width:-moz-fit-content;width:fit-content;padding:3px;background-color:#810808;color:#fff}.second-box[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;width:32%;padding-top:5px}.location[_ngcontent-%COMP%]{font-size:15px}.description-container[_ngcontent-%COMP%]{width:100%;text-align:center;overflow:auto}.seperator[_ngcontent-%COMP%]{width:1px;height:100%;background-color:gray}.third-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;width:60%;height:100%;padding-left:5px;padding-right:5px;padding-top:5px}.medic[_ngcontent-%COMP%], .patient[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-direction:row;height:22%;font-size:15px}.medic-name-green[_ngcontent-%COMP%]{color:#08811b}.medic-name-red[_ngcontent-%COMP%], .patient-name-red[_ngcontent-%COMP%]{color:#810808}.vitals[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;width:100%;overflow:auto}ion-img[_ngcontent-%COMP%]{width:20px}.heart-rate[_ngcontent-%COMP%], .blood-pressure[_ngcontent-%COMP%], .spo2[_ngcontent-%COMP%], .temperature[_ngcontent-%COMP%], .respiration-rate[_ngcontent-%COMP%], .capillary-refill[_ngcontent-%COMP%], .pupils-reaction[_ngcontent-%COMP%], .hemo-gluco-test[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;padding:3px}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}.body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-evenly;margin-top:10em;padding:10px}.no-emergencies-img[_ngcontent-%COMP%]{width:80%}"]}),i})()}];let P=(()=>{var n;class i{}return(n=i).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.Bz.forChild(y),p.Bz]}),i})(),v=(()=>{var n;class i{}return(n=i).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[l.ez,m.u5,c.Pc,P]}),i})()}}]);