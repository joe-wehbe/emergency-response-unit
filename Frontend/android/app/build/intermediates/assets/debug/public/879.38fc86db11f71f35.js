"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[879],{879:(R,p,c)=>{c.r(p),c.d(p,{CoverRequestsPageModule:()=>M});var g=c(6814),f=c(6223),i=c(451),d=c(8179),m=c(5861),e=c(9212),v=c(6530);function x(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"ion-card",8),e.NdJ("click",function(){const a=e.CHM(n).$implicit,u=e.oxw(2);return e.KtG(u.presentAlert(a.id))}),e._UZ(1,"div",9),e.TgZ(2,"div",10)(3,"ion-avatar",11),e._UZ(4,"img",12),e.qZA()(),e.TgZ(5,"div",13)(6,"div",14)(7,"div",15)(8,"div",16)(9,"p",17),e._uU(10),e.qZA(),e.TgZ(11,"p",18),e._uU(12),e.qZA()(),e.TgZ(13,"div",19)(14,"p",20),e._uU(15),e.qZA(),e.TgZ(16,"p",21),e._uU(17),e.qZA()()(),e.TgZ(18,"div",22),e._UZ(19,"ion-icon",23),e.TgZ(20,"p",24),e._uU(21),e.qZA()()()()()}if(2&t){const n=s.$implicit;e.xp6(10),e.AsE("",n.user.first_name," ",n.user.last_name,""),e.xp6(2),e.AsE("",n.shift.time_start,"-",n.shift.time_end,""),e.xp6(3),e.Oqu(n.user.rank.rank_name),e.xp6(2),e.Oqu(n.shift.day),e.xp6(4),e.Oqu(n.reason)}}function h(t,s){if(1&t&&(e.ynx(0),e.TgZ(1,"div",5)(2,"p"),e._uU(3),e.qZA(),e.TgZ(4,"p",6),e._uU(5,"The member you cover for will be notified of your acceptance"),e.qZA()(),e.YNc(6,x,22,7,"ion-card",7),e.BQk()),2&t){const n=e.oxw();e.xp6(3),e.AsE("",n.coverRequests.length," ",1===n.coverRequests.length?"Cover Request":"Cover Requests",""),e.xp6(3),e.Q6J("ngForOf",n.coverRequests)}}function _(t,s){1&t&&(e.ynx(0),e.TgZ(1,"div",25),e._UZ(2,"ion-spinner",26),e.qZA(),e.BQk())}function C(t,s){1&t&&(e.ynx(0),e.TgZ(1,"div",25)(2,"div",5)(3,"p"),e._uU(4,"No cover requests"),e.qZA(),e.TgZ(5,"p",6),e._uU(6,"Cover requests sent by members will appear here"),e.qZA(),e._UZ(7,"ion-img",27),e.qZA()(),e.BQk())}function q(t,s){if(1&t&&(e.ynx(0),e.YNc(1,_,3,0,"ng-container",4)(2,C,8,0,"ng-container",4),e.BQk()),2&t){const n=e.oxw();e.xp6(),e.Q6J("ngIf",n.isLoading),e.xp6(),e.Q6J("ngIf",!n.isLoading)}}const P=[{path:"",component:(()=>{var t;class s{constructor(o,r){this.userService=o,this.alertController=r,this.coverRequests=[],this.isLoading=!1}ngOnInit(){this.getAllCoverRequests()}getAllCoverRequests(){this.isLoading=!0,this.userService.getAllCoverRequests().subscribe({next:o=>{if(o&&o.hasOwnProperty("coverRequests")){console.log("Fetched all cover requests: ",o);const r=JSON.parse(JSON.stringify(o));this.coverRequests=[].concat.apply([],Object.values(r.coverRequests)),this.coverRequests.forEach(a=>{a.shift.time_start=this.formatTime(a.shift.time_start),a.shift.time_end=this.formatTime(a.shift.time_end)})}else console.log("No cover requests")},error:o=>{console.error("Error retrieving cover requests:",o)},complete:()=>{this.isLoading=!1}})}formatTime(o){const[r,a]=o.split(":");return`${r}:${a}`}presentAlert(o){var r=this;return(0,m.Z)(function*(){var u;yield(yield r.alertController.create({header:"Accept cover request",subHeader:"Failing to cover this member\u2019s shift will affect their attendance!",cssClass:"alert-dialog",buttons:[{text:"Cancel",role:"cancel",cssClass:"alert-button-cancel"},{text:"Accept",cssClass:"alert-button-ok-green",handler:(u=(0,m.Z)(function*(){return r.userService.acceptCoverRequest(o).subscribe({next:l=>{console.log("Cover request accepted:",l),r.ngOnInit()},error:l=>{console.error("Error applying:",l)}}),!0}),function(){return u.apply(this,arguments)})}]})).present()})()}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(v.K),e.Y36(i.Br))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-cover-requests"]],decls:9,vars:2,consts:[["id","main-content"],[1,"toolbar"],["slot","start"],[1,"title"],[4,"ngIf"],[1,"stmt"],[1,"second-stmt"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"first-box"],[1,"second-box"],["slot","start",1,"profile-picture"],["alt","Silhouette of a person's head","src","https://ionicframework.com/docs/img/demos/avatar.svg"],[1,"third-box"],["id","cover_requests",1,"cover_requests"],[1,"upper-container"],[1,"name-time-container"],[1,"name"],[1,"time"],[1,"role-container"],[1,"role"],[1,"date"],[1,"description-container"],["name","chatbubble-ellipses-outline",1,"icon"],[1,"description"],[1,"body"],["name","crescent"],["src","assets/img/no-emergencies-img.png",1,"no-emergencies-img"]],template:function(o,r){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title",3),e._uU(5,"Cover Requests"),e.qZA()()(),e.TgZ(6,"ion-content"),e.YNc(7,h,7,3,"ng-container",4)(8,q,3,2,"ng-container",4),e.qZA()),2&o&&(e.xp6(7),e.Q6J("ngIf",r.coverRequests.length>0),e.xp6(),e.Q6J("ngIf",0==r.coverRequests.length))},dependencies:[g.sg,g.O5,i.BJ,i.Sm,i.PM,i.W2,i.Gu,i.gu,i.Xz,i.fG,i.PQ,i.wd,i.sr],styles:[".toolbar[_ngcontent-%COMP%]{height:60px}ion-menu-button[_ngcontent-%COMP%]{font-weight:400;margin-top:12px}.title[_ngcontent-%COMP%]{font-size:22px;font-weight:400;margin-top:7px}.second-stmt[_ngcontent-%COMP%]{text-align:center;width:80%;margin-top:-1em;font-size:14px}ion-card[_ngcontent-%COMP%]{display:flex;flex-direction:row;box-shadow:0 0 8px #0000004d;height:6em;margin:1em}ion-card[_ngcontent-%COMP%]:active{animation:_ngcontent-%COMP%_pulse .1s ease-in-out}.first-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:10%;height:100%;background-color:#838383;padding:5px}.second-box[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.profile-picture[_ngcontent-%COMP%]{height:60px;width:60px;margin:10px}.third-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-evenly;height:100%;width:100%;padding-right:10px;margin-right:0}.name-time-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:100%}.name[_ngcontent-%COMP%]{font-size:17px;align-items:flex-start}.time[_ngcontent-%COMP%]{font-size:16px;align-items:flex-end;padding-right:5px}.date[_ngcontent-%COMP%]{padding-right:3px}.role-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.role[_ngcontent-%COMP%]{padding-left:3px;font-size:13px}.description-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}ion-icon[_ngcontent-%COMP%]{font-size:15px;padding-top:7px}.description[_ngcontent-%COMP%]{font-style:italic;font-size:13px;padding-left:5px;padding-top:7px}.name[_ngcontent-%COMP%], .time[_ngcontent-%COMP%], .date[_ngcontent-%COMP%], .role[_ngcontent-%COMP%], .description[_ngcontent-%COMP%]{margin:0}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}.body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-evenly;margin-top:5em;padding:10px}.stmt[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding-top:1em;font-size:18px;font-weight:700}.second-stmt[_ngcontent-%COMP%]{margin-top:-1em;font-size:14px;text-align:center}.no-emergencies-img[_ngcontent-%COMP%]{width:80%}.no-results[_ngcontent-%COMP%]{font-style:italic}"]}),s})()}];let y=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.Bz.forChild(P),d.Bz]}),s})();var O=c(9862);let M=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.ez,f.u5,O.JF,i.Pc,y]}),s})()}}]);