"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7805],{7805:(J,u,c)=>{c.r(u),c.d(u,{ManageExtensionsPageModule:()=>w});var d=c(6814),l=c(6223),a=c(451),x=c(8179),_=c(5861),n=c(9212),p=c(82),m=c(6530);function h(e,r){if(1&e){const i=n.EpF();n.TgZ(0,"form",null,15)(2,"div",16)(3,"p",17),n._uU(4," Add useful extensions "),n.qZA(),n.TgZ(5,"div",18)(6,"ion-text"),n._uU(7," Write the name of the extension"),n.qZA(),n.TgZ(8,"ion-input",19),n.NdJ("ngModelChange",function(o){n.CHM(i);const s=n.oxw();return n.KtG(s.name=o)}),n.qZA()(),n.TgZ(9,"div",20)(10,"ion-text"),n._uU(11,"Write the extension number"),n.qZA(),n.TgZ(12,"ion-input",21),n.NdJ("ngModelChange",function(o){n.CHM(i);const s=n.oxw();return n.KtG(s.number=o)}),n.qZA()(),n.TgZ(13,"div",22)(14,"ion-button",23),n.NdJ("click",function(){n.CHM(i);const o=n.oxw();return n.KtG(o.dismiss())}),n._uU(15,"Cancel"),n.qZA(),n.TgZ(16,"ion-button",24),n.NdJ("click",function(){n.CHM(i);const o=n.oxw();return n.KtG(o.addExtension())}),n._uU(17,"Add"),n.qZA()()()()}if(2&e){const i=n.MAs(1),t=n.oxw();n.xp6(8),n.Q6J("ngModel",t.name),n.xp6(4),n.Q6J("ngModel",t.number),n.xp6(4),n.Q6J("disabled",i.invalid)}}function f(e,r){if(1&e){const i=n.EpF();n.TgZ(0,"ion-item",29),n.NdJ("click",function(){const s=n.CHM(i).$implicit,g=n.oxw(5);return n.KtG(g.deleteAlert(s.id))}),n.TgZ(1,"span",30),n._uU(2),n.qZA(),n.TgZ(3,"ion-text",31),n._uU(4),n.qZA()()}if(2&e){const i=r.$implicit;n.xp6(2),n.Oqu(i.name),n.xp6(2),n.Oqu(i.number)}}function M(e,r){if(1&e&&(n.TgZ(0,"ion-list")(1,"ion-list-header",27),n._uU(2),n.qZA(),n.TgZ(3,"ion-card"),n.YNc(4,f,5,2,"ion-item",28),n.qZA()()),2&e){const i=n.oxw().$implicit;n.xp6(),n.Q6J("id","header-"+i.letter),n.xp6(),n.Oqu(i.letter),n.xp6(2),n.Q6J("ngForOf",i.extensions)}}function b(e,r){if(1&e&&(n.ynx(0),n.YNc(1,M,5,3,"ion-list",14),n.BQk()),2&e){const i=r.$implicit;n.xp6(),n.Q6J("ngIf",i.extensions.length>0)}}function E(e,r){if(1&e&&(n.ynx(0),n.YNc(1,b,2,1,"ng-container",26),n.BQk()),2&e){const i=n.oxw(2);n.xp6(),n.Q6J("ngForOf",i.filteredGroupedExtensions)}}function P(e,r){1&e&&(n.ynx(0),n.TgZ(1,"div",32)(2,"p",33),n._uU(3,"No extensions found"),n.qZA()(),n.BQk())}function C(e,r){if(1&e&&(n.ynx(0),n.TgZ(1,"div",25),n.YNc(2,E,2,1,"ng-container",14)(3,P,4,0,"ng-container",14),n.qZA(),n.BQk()),2&e){const i=n.oxw();n.xp6(2),n.Q6J("ngIf",i.filteredGroupedExtensions.length>0),n.xp6(),n.Q6J("ngIf",0==i.filteredGroupedExtensions.length)}}function y(e,r){1&e&&(n.ynx(0),n.TgZ(1,"div",32),n._UZ(2,"ion-spinner",34),n.qZA(),n.BQk())}function Z(e,r){1&e&&(n.ynx(0),n.TgZ(1,"div",32)(2,"div",35)(3,"p"),n._uU(4,"No extensions "),n.qZA(),n.TgZ(5,"p",36),n._uU(6,"Phone extensions will appear here"),n.qZA(),n._UZ(7,"ion-img",37),n.qZA()(),n.BQk())}function v(e,r){if(1&e&&(n.ynx(0),n.YNc(1,y,3,0,"ng-container",14)(2,Z,8,0,"ng-container",14),n.BQk()),2&e){const i=n.oxw();n.xp6(),n.Q6J("ngIf",i.isLoading),n.xp6(),n.Q6J("ngIf",!i.isLoading)}}const O=[{path:"",component:(()=>{var e;class r{constructor(t,o,s,g,A,k){this.toastController=t,this.adminService=o,this.router=s,this.modalController=g,this.alertController=A,this.userService=k,this.name="",this.number="",this.allExtensions=[],this.extensions=[],this.groupedExtensions=[],this.filteredGroupedExtensions=[],this.isLoading=!1}ngOnInit(){this.extensions=[],this.getExtensions()}getExtensions(){this.isLoading=!0,this.userService.getExtensions().subscribe({next:t=>{if(t&&t.hasOwnProperty("extensions")){console.log("Fetched all extensions: ",t);const o=JSON.parse(JSON.stringify(t));this.allExtensions=[].concat.apply([],Object.values(o.extensions)),this.allExtensions.forEach(s=>{this.extensions.push({id:s.id,name:s.name,number:s.number})}),this.groupExtensions(),this.filteredGroupedExtensions=[...this.groupedExtensions]}else console.log("No extensions")},error:t=>{console.error("Error retrieving extensions:",t)},complete:()=>{this.isLoading=!1}})}groupExtensions(){this.extensions.sort((o,s)=>o.name.localeCompare(s.name));const t={};this.extensions.forEach(o=>{const s=o.name.charAt(0).toUpperCase();t[s]=t[s]||[],t[s].push(o)}),this.groupedExtensions=Object.keys(t).map(o=>({letter:o,extensions:t[o]}))}handleInput(t){const o=t.target.value.trim().toLowerCase();this.filteredGroupedExtensions=""!==o?this.groupedExtensions.map(s=>({letter:s.letter,extensions:s.extensions.filter(g=>g.name.toLowerCase().includes(o))})).filter(s=>s.extensions.length>0):[...this.groupedExtensions]}addExtension(){this.adminService.addExtension(this.name,this.number).subscribe({next:t=>{console.log("Added extension successfully:",t),this.presentToast("Extension added"),this.name="",this.number="",this.dismiss(),this.ngOnInit()},error:t=>{console.error("Error adding extension:",t)}})}deleteAlert(t){var o=this;return(0,_.Z)(function*(){yield(yield o.alertController.create({header:"Delete Extension",subHeader:"Are you sure you want to permanently delete this extension?",cssClass:"alert-dialog",buttons:[{text:"Cancel",role:"cancel",cssClass:"alert-button-cancel"},{text:"Delete",cssClass:"alert-button-ok-red",handler:()=>{o.deleteExtension(t)}}]})).present()})()}deleteExtension(t){this.adminService.deleteExtension(t).subscribe({next:o=>{console.log("Deleted extension successfully:",o),this.presentToast("Extension deleted"),this.dismiss(),this.ngOnInit()},error:o=>{console.error("Error deleting exntesion:",o)}})}presentToast(t){var o=this;return(0,_.Z)(function*(){(yield o.toastController.create({message:t,duration:2e3,position:"bottom"})).present()})()}dismiss(){this.modalController.dismiss()}back(){this.router.navigate(["/admin-panel"])}}return(e=r).\u0275fac=function(t){return new(t||e)(n.Y36(a.yF),n.Y36(p.l),n.Y36(x.F0),n.Y36(a.IN),n.Y36(a.Br),n.Y36(m.K))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-manage-extensions"]],decls:19,vars:3,consts:[["id","main-content"],[1,"header-toolbar"],[1,"toolbar-container"],["slot","start"],[3,"click"],["name","chevron-back-outline",1,"back-button"],[1,"title"],["vertical","bottom","horizontal","end","slot","fixed"],["id","add-extension"],["name","add"],["mode","ios","id","add-extension-modal","trigger","add-extension"],["modal",""],[1,"search-bar-container"],["mode","md","placeholder","Search a name...",1,"search-bar",3,"debounce","ionInput"],[4,"ngIf"],["extensionForm","ngForm"],[1,"wrapper"],[1,"statement"],[1,"modal-name-container"],["placeholder","Name...","name","extensionName","required","",3,"ngModel","ngModelChange"],[1,"modal-number-container"],["type","number","placeholder","Number...","name","extensionNumber","required","",3,"ngModel","ngModelChange"],[1,"buttons-container"],["fill","outline",1,"cancel-button",3,"click"],["fill","outline",1,"add-button",3,"disabled","click"],[1,"lists-container"],[4,"ngFor","ngForOf"],[3,"id"],["lines","full",3,"click",4,"ngFor","ngForOf"],["lines","full",3,"click"],[1,"first-name"],["slot","end"],[1,"body"],[1,"no-results"],["name","crescent"],[1,"stmt"],[1,"second-stmt"],["src","assets/img/no-emergencies-img.png",1,"no-emergencies-img"]],template:function(t,o){1&t&&(n.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"div",2)(3,"ion-buttons",3)(4,"ion-button",4),n.NdJ("click",function(){return o.back()}),n._UZ(5,"ion-icon",5),n.qZA()(),n.TgZ(6,"ion-title",6),n._uU(7,"Manage Extensions"),n.qZA()()()(),n.TgZ(8,"ion-content")(9,"ion-fab",7)(10,"ion-fab-button",8),n._UZ(11,"ion-icon",9),n.qZA()(),n.TgZ(12,"ion-modal",10,11),n.YNc(14,h,18,3,"ng-template"),n.qZA(),n.TgZ(15,"div",12)(16,"ion-searchbar",13),n.NdJ("ionInput",function(g){return o.handleInput(g)}),n.qZA()(),n.YNc(17,C,4,2,"ng-container",14)(18,v,3,2,"ng-container",14),n.qZA()),2&t&&(n.xp6(16),n.Q6J("debounce",800),n.xp6(),n.Q6J("ngIf",o.allExtensions.length>0),n.xp6(),n.Q6J("ngIf",0==o.allExtensions.length))},dependencies:[d.sg,d.O5,l._Y,l.JJ,l.JL,l.Q7,l.On,l.F,a.YG,a.Sm,a.PM,a.W2,a.IJ,a.W4,a.Gu,a.gu,a.Xz,a.pK,a.Ie,a.q_,a.yh,a.VI,a.PQ,a.yW,a.wd,a.sr,a.ki,a.as,a.j9],styles:[".header-toolbar[_ngcontent-%COMP%]{height:60px;display:flex;justify-content:center;align-items:center}.toolbar-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:5px}.back-button[_ngcontent-%COMP%]{font-weight:400}.title[_ngcontent-%COMP%]{font-size:22px;font-weight:400}.search-bar-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding-top:1em}.search-bar-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin:1.2em}ion-searchbar.search-bar[_ngcontent-%COMP%]{padding:0 10px;border:solid 1px;border-radius:20px;--background: transparent;--box-shadow: none}.lists-container[_ngcontent-%COMP%]{margin:1em}ion-list[_ngcontent-%COMP%]{--ion-item-background: transparent}ion-list-header[_ngcontent-%COMP%]{font-weight:700}ion-card[_ngcontent-%COMP%]{margin:0}ion-item[_ngcontent-%COMP%]:active{opacity:.2}ion-fab-button[_ngcontent-%COMP%]{--background: #810808;--color: white;--background-activated: #380404;margin:5px}ion-modal#add-extension-modal[_ngcontent-%COMP%]{--width: 90%;--min-width: 250px;--height: fit-content;--border-radius: 6px;--box-shadow: 0 28px 48px rgba(0, 0, 0, .4)}ion-modal#add-extension-modal[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:10px}.statement[_ngcontent-%COMP%]{font-weight:700;font-size:18px}.modal-name-container[_ngcontent-%COMP%], .modal-number-container[_ngcontent-%COMP%]{padding:10px;width:100%}ion-input[_ngcontent-%COMP%]{border:1px solid gray;border-radius:10px;--padding-end: 10px;--padding-start: 10px}.modal-icon[_ngcontent-%COMP%]{font-size:30px;color:#810808;padding-left:10px}.buttons-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:10px;width:100%}.add-button[_ngcontent-%COMP%]{--border-color: #810808;--background-activated: #810808;--color-activated: white;width:50%}.cancel-button[_ngcontent-%COMP%]{--background-activated: #810808;--color-activated: white;width:50%}.body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-evenly;margin-top:5em;padding:10px}.stmt[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding-top:1em;font-size:18px;font-weight:700}.second-stmt[_ngcontent-%COMP%]{margin-top:-1em;font-size:14px;text-align:center}.no-emergencies-img[_ngcontent-%COMP%]{width:80%}.no-results[_ngcontent-%COMP%]{font-style:italic}"]}),r})()}];let T=(()=>{var e;class r{}return(e=r).\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[x.Bz.forChild(O),x.Bz]}),r})(),w=(()=>{var e;class r{}return(e=r).\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[d.ez,l.u5,a.Pc,T]}),r})()}}]);