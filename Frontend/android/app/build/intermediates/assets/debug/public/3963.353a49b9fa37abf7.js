"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3963],{3963:(Z,g,r)=>{r.r(g),r.d(g,{ReportPageModule:()=>k});var u=r(6814),h=r(6223),c=r(451),p=r(8179),m=r(5861),t=r(9212),C=r(4050),y=r(8859);function P(e,o){if(1&e&&(t.TgZ(0,"div",11)(1,"h2"),t._uU(2),t.qZA()()),2&e){const a=t.oxw();t.xp6(2),t.Oqu(a.notifyingStatement)}}const b=e=>({"sos-button-animated":e}),x=(e,o)=>({"circle circle-2-animated":e,"circle circle-2":o}),O=(e,o)=>({"circle circle-3-animated":e,"circle circle-3":o}),M=[{path:"",component:(()=>{var e;class o{constructor(n,s,d,i){this.alertController=n,this.toastController=s,this.emergencyService=d,this.fcmService=i,this.isButtonClicked=!1,this.notifyingStatement="",this.firstH4Content="Press the button below",this.secondH4Content="to notify medics"}ngOnInit(){}reportEmergencyAlert(){var n=this;return(0,m.Z)(function*(){var d;n.isButtonClicked||(yield(yield n.alertController.create({header:"Emergency Alert",subHeader:"Please provide emergency information",cssClass:"alert-dialog",mode:"ios",inputs:[{name:"location",type:"text",placeholder:"Location...",cssClass:"location-input",attributes:{required:!0,maxlength:20}},{name:"description",type:"text",placeholder:"Description...",cssClass:"description-input",attributes:{required:!0}}],buttons:[{text:"Cancel",role:"cancel",cssClass:"alert-button-cancel",handler:()=>!0},{text:"Report",cssClass:"alert-button-ok-red",handler:(d=(0,m.Z)(function*(i){return i.location||i.description?i.location?i.description?(n.emergencyService.reportEmergency(i.location,i.description).subscribe({next:l=>{console.log("Emergency reported successfully:",l),n.sendSOS(),n.fcmService.notifyFirstResponders(i.location,i.description)},error:l=>{console.error("Error reporting emergency:",l)},complete:()=>{}}),!0):((yield n.toastController.create({message:"Please provide a description",duration:2e3,position:"bottom"})).present(),!1):((yield n.toastController.create({message:"Please specify the emergency location",duration:2e3,position:"bottom"})).present(),!1):((yield n.toastController.create({message:"Please specify emergency location and description",duration:2e3,position:"bottom"})).present(),!1)}),function(l){return d.apply(this,arguments)})}]})).present())})()}sendSOS(){this.notifyingStatement="Notifying medics...",this.firstH4Content="We will let you know",this.secondH4Content="when a medic responds",this.isButtonClicked=!0;const n=document.querySelector(".sos-button");n&&(n.classList.add("clicked"),setTimeout(()=>{n.classList.remove("clicked")},500)),setTimeout(()=>{this.isButtonClicked=!1,this.notifyingStatement="No medics responded!",this.firstH4Content="Dial #3934 from a nearby",this.secondH4Content="campus phone or try again!"},6e4)}}return(e=o).\u0275fac=function(n){return new(n||e)(t.Y36(c.Br),t.Y36(c.yF),t.Y36(C.m),t.Y36(y.E))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-report"]],decls:22,vars:14,consts:[["id","main-content"],[1,"toolbar"],["slot","start"],[1,"title"],[1,"body"],[1,"stmt"],[1,"second"],[1,"circles-container"],[1,"sos-button",3,"ngClass","click"],[3,"ngClass"],["class","notif-stmt",4,"ngIf"],[1,"notif-stmt"]],template:function(n,s){1&n&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-title",3),t._uU(5,"Report Emergency"),t.qZA()()(),t.TgZ(6,"ion-content")(7,"div",4)(8,"div",5)(9,"h1"),t._uU(10,"Spotted an emergency?"),t.qZA(),t.TgZ(11,"h4"),t._uU(12),t.qZA(),t.TgZ(13,"h4",6),t._uU(14),t.qZA()(),t.TgZ(15,"div",7)(16,"button",8),t.NdJ("click",function(){return s.reportEmergencyAlert()}),t.TgZ(17,"h1"),t._uU(18,"SOS"),t.qZA()(),t._UZ(19,"div",9)(20,"div",9),t.qZA(),t.YNc(21,P,3,1,"div",10),t.qZA()()),2&n&&(t.xp6(12),t.Oqu(s.firstH4Content),t.xp6(2),t.Oqu(s.secondH4Content),t.xp6(2),t.Q6J("ngClass",t.VKq(6,b,s.isButtonClicked)),t.xp6(3),t.Q6J("ngClass",t.WLB(8,x,s.isButtonClicked,!s.isButtonClicked)),t.xp6(),t.Q6J("ngClass",t.WLB(11,O,s.isButtonClicked,!s.isButtonClicked)),t.xp6(),t.Q6J("ngIf",s.notifyingStatement))},dependencies:[u.mk,u.O5,c.Sm,c.W2,c.Gu,c.fG,c.wd,c.sr],styles:[".toolbar[_ngcontent-%COMP%]{height:60px;display:flex;justify-content:center;align-items:center}ion-menu-button[_ngcontent-%COMP%]{font-weight:400}.title[_ngcontent-%COMP%]{font-size:22px;font-weight:400}.welcome[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#837272;font-size:20px;margin:0}.welcome[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:24px;margin:0}.body[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding-top:6em}.stmt[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.stmt[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;margin-bottom:1em}.stmt[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;margin:0}.circles-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:20em}.sos-button[_ngcontent-%COMP%]{border-radius:50%;width:160px;height:160px;background-color:#81080899;z-index:3;color:#fff;font-size:24px;border:none;cursor:pointer;transition:background-color .3s ease}.sos-button-animated[_ngcontent-%COMP%]{border-radius:50%;width:160px;height:160px;background-color:#81080899;z-index:3;color:#fff;font-size:24px;border:none;cursor:pointer;transition:background-color .3s ease;animation:_ngcontent-%COMP%_sos-pulse 1.2s ease-out infinite}.sos-button[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:45px}.circle-2[_ngcontent-%COMP%]{position:absolute;border-radius:50%;width:200px;height:200px;background-color:#81080866;z-index:2}.circle-2-animated[_ngcontent-%COMP%]{position:absolute;border-radius:50%;width:190px;height:190px;background-color:#81080866;z-index:2;animation:_ngcontent-%COMP%_sos-wave 1.2s ease-out infinite}.circle-3[_ngcontent-%COMP%]{position:absolute;border-radius:50%;width:240px;height:240px;background-color:#81080833;z-index:1}.circle-3-animated[_ngcontent-%COMP%]{position:absolute;border-radius:50%;width:240px;height:240px;background-color:#81080833;z-index:1;animation:_ngcontent-%COMP%_sos-wave 1.2s ease-out infinite}@keyframes _ngcontent-%COMP%_sos-pulse{0%{transform:scale(1)}50%{transform:scale(1.06)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_sos-wave{0%{transform:scale(0);opacity:.8}to{transform:scale(1.2);opacity:.6}}.notif-stmt[_ngcontent-%COMP%]{text-align:center}"]}),o})()}];let v=(()=>{var e;class o{}return(e=o).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.Bz.forChild(M),p.Bz]}),o})(),k=(()=>{var e;class o{}return(e=o).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.ez,h.u5,c.Pc,v]}),o})()}}]);